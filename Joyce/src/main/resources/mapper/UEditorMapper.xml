<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.moon.joyce.example.mapper.UEditorMapper">
    <select id="selectList" resultType="com.moon.joyce.example.entity.Article">
        SELECT
            id, create_by, create_time, delete_flag, update_by, update_time, author, class_id, content, pv_content, title, user_id
        FROM springboot.article a
        WHERE a.delete_flag = 0

        <if test="article.title!=null and article.title!=''">
            AND a.title LIKE concat('%',#{article.title},'%')
        </if>
        <if test="article.author!=null and article.author!=''">
            AND a.author LIKE concat('%',#{article.author},'%')
        </if>

        <if test="article.offset!=null and article.offset!=0 and  article.pageNumber!=null and  article.pageNumber!=0  ">
            LIMIT #{article.offset}, #{article.pageNumber}
        </if>
        <if test=" idList!=null">
            AND a.user_id IN
            <foreach collection="idList"  item="id" index="" open="(" close=")" separator=",">
                #{id}
            </foreach>
        </if>
    </select>

    <select id="getTotal" resultType="java.lang.Integer">
        SELECT count(*) FROM springboot.article a
        WHERE a.delete_flag = 0
        AND a.user_id
        IN
        <foreach collection="idList" item="id" index="index" open="(" close=")" separator=",">
            #{id}
        </foreach>
        <if test="article.title!=null and article.title!=''">
            AND a.title LIKE concat('%',#{article.title},'%')
        </if>
        <if test="article.author!=null and article.author!=''">
            AND a.author LIKE concat('%',#{article.author},'%')
        </if>

    </select>
</mapper>