<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.moon.joyce.example.mapper.LoggingMapper" >
    <select id="getList" resultType="com.moon.joyce.example.functionality.entity.doma.Logging">
        SELECT dt.*   FROM springboot.logging dt
        WHERE dt .del_flag = 0
        <if test="startTime!=null">
            AND  date_format(#{startTime},'%Y-%m-%d')  &lt;= date_format(dt.create_time,'%Y-%m-%d')
        </if>
        <if test="endTime!=null">
            AND  date_format( #{endTime},'%Y-%m-%d') &gt;= date_format(dt.create_time,'%Y-%m-%d')
        </if>
        <if test="startTime2!=null">
            AND   date_format( #{startTime2},'%Y-%m-%d') &lt;= date_format( dt.end_times,'%Y-%m-%d')
        </if>
        <if test="endTime2!=null">
            AND  date_format( #{endTime2},'%Y-%m-%d') &gt;= date_format(dt.end_times,'%Y-%m-%d')
        </if>
        <if test="userId!=null and userId!=0">
            AND dt.user_id = #{userId}
        </if>
        <if test="offset!=null  and  pageNumber!=null  and pageNumber!=0 ">
            LIMIT #{offset}, #{pageNumber}
        </if>
    </select>
    <select id="getTotal" resultType="java.lang.Long">
        SELECT count(*)   FROM springboot.logging dt
        WHERE dt .del_flag = 0
        <if test="startTime!=null">
            AND  date_format(#{startTime},'%Y-%m-%d')  &lt;= date_format(dt.create_time,'%Y-%m-%d')
        </if>
        <if test="endTime!=null">
            AND  date_format( #{endTime},'%Y-%m-%d') &gt;= date_format(dt.create_time,'%Y-%m-%d')
        </if>
        <if test="startTime2!=null">
            AND   date_format( #{startTime2},'%Y-%m-%d') &lt;= date_format( dt.end_times,'%Y-%m-%d')
        </if>
        <if test="endTime2!=null">
            AND  date_format( #{endTime2},'%Y-%m-%d') &gt;= date_format(dt.end_times,'%Y-%m-%d')
        </if>
        <if test="userId!=null and userId!=0">
            AND dt.user_id = #{userId}
        </if>
    </select>
</mapper>